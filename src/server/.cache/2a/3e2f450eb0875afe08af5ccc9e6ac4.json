{"id":"kO9Z","dependencies":[{"name":"C:\\xampp\\htdocs\\pet\\src\\server\\.babelrc","includedInParent":true,"mtime":1607404923905},{"name":"C:\\xampp\\htdocs\\pet\\src\\server\\package.json","includedInParent":true,"mtime":1607412288975},{"name":"./../lib/MidoDb","loc":{"line":1,"column":23},"parent":"C:\\xampp\\htdocs\\pet\\src\\server\\routes\\login.js","resolved":"C:\\xampp\\htdocs\\pet\\src\\server\\lib\\MidoDb.js"},{"name":"./../lib/Crypto","loc":{"line":2,"column":23},"parent":"C:\\xampp\\htdocs\\pet\\src\\server\\routes\\login.js","resolved":"C:\\xampp\\htdocs\\pet\\src\\server\\lib\\Crypto.js"},{"name":"./../lib/Utils","loc":{"line":3,"column":22},"parent":"C:\\xampp\\htdocs\\pet\\src\\server\\routes\\login.js","resolved":"C:\\xampp\\htdocs\\pet\\src\\server\\lib\\Utils.js"}],"generated":{"js":"function e(e,n,r,t,s,i,u){try{var o=e[i](u),a=o.value}catch(c){return void r(c)}o.done?n(a):Promise.resolve(a).then(t,s)}function n(n){return function(){var r=this,t=arguments;return new Promise(function(s,i){var u=n.apply(r,t);function o(n){e(u,s,i,o,a,\"next\",n)}function a(n){e(u,s,i,o,a,\"throw\",n)}o(void 0)})}}var r=require(\"./../lib/MidoDb\"),t=require(\"./../lib/Crypto\"),s=require(\"./../lib/Utils\");module.exports=function(){var e=n(regeneratorRuntime.mark(function e(n,i,u){var o,a,c,l,d,v=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=v.length>3&&void 0!==v[3]?v[3]:\"users\",(a=n.query)&&a.user&&a.password){e.next=4;break}return e.abrupt(\"return\",i.send(s.buildResponse(!1,\"invalid params\")));case 4:c=n.session,l=t.md5(a.password),d=a.user,r.init(\"mongodb\").then(function(e){var n={user:d,password:l};r.selectRecord(o,n).then(function(e){if(!e.length||0===e.length){return i.send(s.buildResponse(!1,\"Invalid login details\"))}var n=e[0];if(1!==n.status){var r=\"Account has been deactivated \".concat(n.user,\". Please contact admin\");return i.send(s.buildResponse(!1,r))}var t=\"Welcome \".concat(n.user);return c.user=n.user,c.user_email=n.email,c.user_id=n._id,i.send(s.buildResponse(!0,t,n.user,n.email))}).catch(function(e){return console.log(e.message)})}).catch(function(e){return console.log(e.message)});case 8:case\"end\":return e.stop()}},e)}));return function(n,r,t){return e.apply(this,arguments)}}();"},"sourceMaps":{"js":{"mappings":[{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":0}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":9}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":11}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":13}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":15}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":17}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":19}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":21}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":23}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":26}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":30}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":34}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":36}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":38}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":41}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":44}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":46}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":48}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":54}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":60}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":63}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":75}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":77}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":80}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":82}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":87}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":89}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":92}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":100}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":108}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":111}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":116}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":118}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":121}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":130}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":132}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":135}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":142}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":153}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":157}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":159}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":164}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":166}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":176}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":183}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":187}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":195}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":204}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":206}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":209}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":213}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":215}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":217}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":223}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":225}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":228}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":237}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":239}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":242}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":244}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":246}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":248}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":250}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":252}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":254}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":261}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":264}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":273}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":275}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":278}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":280}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":282}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":284}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":286}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":288}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":290}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":298}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":301}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":308}},{"source":"../routes/login.js","original":{"line":1,"column":0},"generated":{"line":1,"column":314}},{"source":"../routes/login.js","name":"MidoDb","original":{"line":1,"column":6},"generated":{"line":1,"column":318}},{"source":"../routes/login.js","name":"require","original":{"line":1,"column":15},"generated":{"line":1,"column":320}},{"source":"../routes/login.js","original":{"line":1,"column":23},"generated":{"line":1,"column":328}},{"source":"../routes/login.js","name":"Crypto","original":{"line":2,"column":6},"generated":{"line":1,"column":347}},{"source":"../routes/login.js","name":"require","original":{"line":2,"column":15},"generated":{"line":1,"column":349}},{"source":"../routes/login.js","original":{"line":2,"column":23},"generated":{"line":1,"column":357}},{"source":"../routes/login.js","name":"Utils","original":{"line":3,"column":6},"generated":{"line":1,"column":376}},{"source":"../routes/login.js","name":"require","original":{"line":3,"column":14},"generated":{"line":1,"column":378}},{"source":"../routes/login.js","original":{"line":3,"column":22},"generated":{"line":1,"column":386}},{"source":"../routes/login.js","name":"module","original":{"line":5,"column":0},"generated":{"line":1,"column":404}},{"source":"../routes/login.js","name":"exports","original":{"line":5,"column":7},"generated":{"line":1,"column":411}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":419}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":430}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":434}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":436}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":438}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":457}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":462}},{"source":"../routes/login.js","name":"req","original":{"line":5,"column":24},"generated":{"line":1,"column":471}},{"source":"../routes/login.js","name":"req","original":{"line":5,"column":24},"generated":{"line":1,"column":473}},{"source":"../routes/login.js","name":"res","original":{"line":5,"column":29},"generated":{"line":1,"column":475}},{"source":"../routes/login.js","name":"next","original":{"line":5,"column":34},"generated":{"line":1,"column":477}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":480}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":484}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":486}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":488}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":490}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":492}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":494}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":496}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":506}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":513}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":532}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":537}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":546}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":549}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":556}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":563}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":565}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":570}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":572}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":578}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":583}},{"source":"../routes/login.js","original":{"line":8,"column":8},"generated":{"line":1,"column":585}},{"source":"../routes/login.js","name":"baseTable","original":{"line":5,"column":40},"generated":{"line":1,"column":588}},{"source":"../routes/login.js","original":{"line":5,"column":52},"generated":{"line":1,"column":590}},{"source":"../routes/login.js","original":{"line":5,"column":52},"generated":{"line":1,"column":592}},{"source":"../routes/login.js","original":{"line":5,"column":52},"generated":{"line":1,"column":599}},{"source":"../routes/login.js","original":{"line":5,"column":52},"generated":{"line":1,"column":607}},{"source":"../routes/login.js","original":{"line":5,"column":52},"generated":{"line":1,"column":611}},{"source":"../routes/login.js","original":{"line":5,"column":52},"generated":{"line":1,"column":613}},{"source":"../routes/login.js","original":{"line":5,"column":52},"generated":{"line":1,"column":616}},{"source":"../routes/login.js","original":{"line":5,"column":52},"generated":{"line":1,"column":618}},{"source":"../routes/login.js","original":{"line":5,"column":52},"generated":{"line":1,"column":621}},{"source":"../routes/login.js","name":"data","original":{"line":7,"column":10},"generated":{"line":1,"column":630}},{"source":"../routes/login.js","name":"req","original":{"line":7,"column":17},"generated":{"line":1,"column":632}},{"source":"../routes/login.js","name":"query","original":{"line":7,"column":21},"generated":{"line":1,"column":634}},{"source":"../routes/login.js","name":"data","original":{"line":8,"column":18},"generated":{"line":1,"column":642}},{"source":"../routes/login.js","name":"user","original":{"line":8,"column":23},"generated":{"line":1,"column":644}},{"source":"../routes/login.js","name":"data","original":{"line":8,"column":32},"generated":{"line":1,"column":650}},{"source":"../routes/login.js","name":"password","original":{"line":8,"column":37},"generated":{"line":1,"column":652}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":661}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":662}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":664}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":669}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":671}},{"source":"../routes/login.js","name":"res","original":{"line":9,"column":15},"generated":{"line":1,"column":677}},{"source":"../routes/login.js","name":"res","original":{"line":9,"column":15},"generated":{"line":1,"column":684}},{"source":"../routes/login.js","name":"res","original":{"line":9,"column":15},"generated":{"line":1,"column":686}},{"source":"../routes/login.js","name":"res","original":{"line":9,"column":15},"generated":{"line":1,"column":693}},{"source":"../routes/login.js","name":"res","original":{"line":9,"column":15},"generated":{"line":1,"column":702}},{"source":"../routes/login.js","name":"send","original":{"line":9,"column":19},"generated":{"line":1,"column":704}},{"source":"../routes/login.js","name":"Utils","original":{"line":9,"column":24},"generated":{"line":1,"column":709}},{"source":"../routes/login.js","name":"buildResponse","original":{"line":9,"column":30},"generated":{"line":1,"column":711}},{"source":"../routes/login.js","original":{"line":9,"column":44},"generated":{"line":1,"column":726}},{"source":"../routes/login.js","original":{"line":9,"column":51},"generated":{"line":1,"column":728}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":748}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":753}},{"source":"../routes/login.js","name":"session","original":{"line":11,"column":8},"generated":{"line":1,"column":755}},{"source":"../routes/login.js","name":"req","original":{"line":11,"column":18},"generated":{"line":1,"column":757}},{"source":"../routes/login.js","name":"session","original":{"line":11,"column":22},"generated":{"line":1,"column":759}},{"source":"../routes/login.js","name":"password","original":{"line":13,"column":10},"generated":{"line":1,"column":767}},{"source":"../routes/login.js","name":"Crypto","original":{"line":13,"column":21},"generated":{"line":1,"column":769}},{"source":"../routes/login.js","name":"md5","original":{"line":13,"column":28},"generated":{"line":1,"column":771}},{"source":"../routes/login.js","name":"data","original":{"line":13,"column":32},"generated":{"line":1,"column":775}},{"source":"../routes/login.js","name":"password","original":{"line":13,"column":37},"generated":{"line":1,"column":777}},{"source":"../routes/login.js","name":"user","original":{"line":14,"column":10},"generated":{"line":1,"column":787}},{"source":"../routes/login.js","name":"data","original":{"line":14,"column":17},"generated":{"line":1,"column":789}},{"source":"../routes/login.js","name":"user","original":{"line":14,"column":22},"generated":{"line":1,"column":791}},{"source":"../routes/login.js","name":"MidoDb","original":{"line":16,"column":4},"generated":{"line":1,"column":796}},{"source":"../routes/login.js","name":"init","original":{"line":16,"column":11},"generated":{"line":1,"column":798}},{"source":"../routes/login.js","original":{"line":16,"column":16},"generated":{"line":1,"column":803}},{"source":"../routes/login.js","name":"then","original":{"line":17,"column":9},"generated":{"line":1,"column":814}},{"source":"../routes/login.js","original":{"line":17,"column":14},"generated":{"line":1,"column":819}},{"source":"../routes/login.js","name":"db","original":{"line":17,"column":14},"generated":{"line":1,"column":828}},{"source":"../routes/login.js","name":"query","original":{"line":18,"column":18},"generated":{"line":1,"column":831}},{"source":"../routes/login.js","name":"query","original":{"line":18,"column":18},"generated":{"line":1,"column":835}},{"source":"../routes/login.js","original":{"line":18,"column":26},"generated":{"line":1,"column":837}},{"source":"../routes/login.js","name":"user","original":{"line":18,"column":27},"generated":{"line":1,"column":838}},{"source":"../routes/login.js","name":"user","original":{"line":18,"column":33},"generated":{"line":1,"column":843}},{"source":"../routes/login.js","name":"password","original":{"line":18,"column":39},"generated":{"line":1,"column":845}},{"source":"../routes/login.js","name":"password","original":{"line":18,"column":49},"generated":{"line":1,"column":854}},{"source":"../routes/login.js","name":"MidoDb","original":{"line":20,"column":12},"generated":{"line":1,"column":857}},{"source":"../routes/login.js","name":"selectRecord","original":{"line":20,"column":19},"generated":{"line":1,"column":859}},{"source":"../routes/login.js","name":"baseTable","original":{"line":20,"column":32},"generated":{"line":1,"column":872}},{"source":"../routes/login.js","name":"query","original":{"line":20,"column":43},"generated":{"line":1,"column":874}},{"source":"../routes/login.js","name":"then","original":{"line":20,"column":50},"generated":{"line":1,"column":877}},{"source":"../routes/login.js","original":{"line":20,"column":55},"generated":{"line":1,"column":882}},{"source":"../routes/login.js","name":"record","original":{"line":20,"column":55},"generated":{"line":1,"column":891}},{"source":"../routes/login.js","original":{"line":21,"column":20},"generated":{"line":1,"column":894}},{"source":"../routes/login.js","name":"record","original":{"line":21,"column":21},"generated":{"line":1,"column":898}},{"source":"../routes/login.js","name":"length","original":{"line":21,"column":28},"generated":{"line":1,"column":900}},{"source":"../routes/login.js","original":{"line":21,"column":56},"generated":{"line":1,"column":908}},{"source":"../routes/login.js","name":"record","original":{"line":21,"column":38},"generated":{"line":1,"column":912}},{"source":"../routes/login.js","name":"length","original":{"line":21,"column":45},"generated":{"line":1,"column":914}},{"source":"../routes/login.js","original":{"line":21,"column":59},"generated":{"line":1,"column":921}},{"source":"../routes/login.js","name":"res","original":{"line":23,"column":27},"generated":{"line":1,"column":922}},{"source":"../routes/login.js","name":"res","original":{"line":23,"column":27},"generated":{"line":1,"column":929}},{"source":"../routes/login.js","name":"send","original":{"line":23,"column":31},"generated":{"line":1,"column":931}},{"source":"../routes/login.js","name":"Utils","original":{"line":23,"column":36},"generated":{"line":1,"column":936}},{"source":"../routes/login.js","name":"buildResponse","original":{"line":23,"column":42},"generated":{"line":1,"column":938}},{"source":"../routes/login.js","original":{"line":23,"column":56},"generated":{"line":1,"column":953}},{"source":"../routes/login.js","original":{"line":22,"column":32},"generated":{"line":1,"column":955}},{"source":"../routes/login.js","name":"user","original":{"line":26,"column":22},"generated":{"line":1,"column":981}},{"source":"../routes/login.js","name":"user","original":{"line":26,"column":22},"generated":{"line":1,"column":985}},{"source":"../routes/login.js","name":"record","original":{"line":26,"column":29},"generated":{"line":1,"column":987}},{"source":"../routes/login.js","original":{"line":26,"column":36},"generated":{"line":1,"column":989}},{"source":"../routes/login.js","name":"user","original":{"line":27,"column":20},"generated":{"line":1,"column":992}},{"source":"../routes/login.js","original":{"line":27,"column":36},"generated":{"line":1,"column":995}},{"source":"../routes/login.js","name":"user","original":{"line":27,"column":20},"generated":{"line":1,"column":999}},{"source":"../routes/login.js","name":"status","original":{"line":27,"column":25},"generated":{"line":1,"column":1001}},{"source":"../routes/login.js","original":{"line":27,"column":39},"generated":{"line":1,"column":1008}},{"source":"../routes/login.js","name":"msg","original":{"line":28,"column":26},"generated":{"line":1,"column":1009}},{"source":"../routes/login.js","name":"msg","original":{"line":28,"column":26},"generated":{"line":1,"column":1013}},{"source":"../routes/login.js","name":"user","original":{"line":28,"column":64},"generated":{"line":1,"column":1015}},{"source":"../routes/login.js","name":"user","original":{"line":28,"column":64},"generated":{"line":1,"column":1047}},{"source":"../routes/login.js","name":"user","original":{"line":28,"column":64},"generated":{"line":1,"column":1054}},{"source":"../routes/login.js","name":"user","original":{"line":28,"column":69},"generated":{"line":1,"column":1056}},{"source":"../routes/login.js","original":{"line":28,"column":20},"generated":{"line":1,"column":1061}},{"source":"../routes/login.js","name":"res","original":{"line":29,"column":27},"generated":{"line":1,"column":1087}},{"source":"../routes/login.js","name":"res","original":{"line":29,"column":27},"generated":{"line":1,"column":1094}},{"source":"../routes/login.js","name":"send","original":{"line":29,"column":31},"generated":{"line":1,"column":1096}},{"source":"../routes/login.js","name":"Utils","original":{"line":29,"column":36},"generated":{"line":1,"column":1101}},{"source":"../routes/login.js","name":"buildResponse","original":{"line":29,"column":42},"generated":{"line":1,"column":1103}},{"source":"../routes/login.js","original":{"line":29,"column":56},"generated":{"line":1,"column":1118}},{"source":"../routes/login.js","name":"msg","original":{"line":29,"column":63},"generated":{"line":1,"column":1120}},{"source":"../routes/login.js","name":"msg","original":{"line":32,"column":22},"generated":{"line":1,"column":1124}},{"source":"../routes/login.js","name":"msg","original":{"line":32,"column":22},"generated":{"line":1,"column":1128}},{"source":"../routes/login.js","name":"user","original":{"line":32,"column":39},"generated":{"line":1,"column":1130}},{"source":"../routes/login.js","name":"user","original":{"line":32,"column":39},"generated":{"line":1,"column":1141}},{"source":"../routes/login.js","name":"user","original":{"line":32,"column":39},"generated":{"line":1,"column":1148}},{"source":"../routes/login.js","name":"user","original":{"line":32,"column":44},"generated":{"line":1,"column":1150}},{"source":"../routes/login.js","name":"res","original":{"line":36,"column":23},"generated":{"line":1,"column":1156}},{"source":"../routes/login.js","name":"session","original":{"line":33,"column":16},"generated":{"line":1,"column":1163}},{"source":"../routes/login.js","name":"user","original":{"line":33,"column":24},"generated":{"line":1,"column":1165}},{"source":"../routes/login.js","name":"user","original":{"line":33,"column":29},"generated":{"line":1,"column":1170}},{"source":"../routes/login.js","name":"user","original":{"line":33,"column":34},"generated":{"line":1,"column":1172}},{"source":"../routes/login.js","name":"session","original":{"line":34,"column":16},"generated":{"line":1,"column":1177}},{"source":"../routes/login.js","name":"user_email","original":{"line":34,"column":24},"generated":{"line":1,"column":1179}},{"source":"../routes/login.js","name":"user","original":{"line":34,"column":35},"generated":{"line":1,"column":1190}},{"source":"../routes/login.js","name":"email","original":{"line":34,"column":40},"generated":{"line":1,"column":1192}},{"source":"../routes/login.js","name":"session","original":{"line":35,"column":16},"generated":{"line":1,"column":1198}},{"source":"../routes/login.js","name":"user_id","original":{"line":35,"column":24},"generated":{"line":1,"column":1200}},{"source":"../routes/login.js","name":"user","original":{"line":35,"column":32},"generated":{"line":1,"column":1208}},{"source":"../routes/login.js","name":"_id","original":{"line":35,"column":37},"generated":{"line":1,"column":1210}},{"source":"../routes/login.js","name":"res","original":{"line":36,"column":23},"generated":{"line":1,"column":1214}},{"source":"../routes/login.js","name":"send","original":{"line":36,"column":27},"generated":{"line":1,"column":1216}},{"source":"../routes/login.js","name":"Utils","original":{"line":36,"column":32},"generated":{"line":1,"column":1221}},{"source":"../routes/login.js","name":"buildResponse","original":{"line":36,"column":38},"generated":{"line":1,"column":1223}},{"source":"../routes/login.js","original":{"line":36,"column":52},"generated":{"line":1,"column":1238}},{"source":"../routes/login.js","name":"msg","original":{"line":36,"column":58},"generated":{"line":1,"column":1240}},{"source":"../routes/login.js","name":"user","original":{"line":36,"column":63},"generated":{"line":1,"column":1242}},{"source":"../routes/login.js","name":"user","original":{"line":36,"column":68},"generated":{"line":1,"column":1244}},{"source":"../routes/login.js","name":"user","original":{"line":36,"column":74},"generated":{"line":1,"column":1249}},{"source":"../routes/login.js","name":"email","original":{"line":36,"column":79},"generated":{"line":1,"column":1251}},{"source":"../routes/login.js","name":"catch","original":{"line":38,"column":15},"generated":{"line":1,"column":1261}},{"source":"../routes/login.js","original":{"line":38,"column":21},"generated":{"line":1,"column":1267}},{"source":"../routes/login.js","name":"err","original":{"line":38,"column":21},"generated":{"line":1,"column":1276}},{"source":"../routes/login.js","name":"console","original":{"line":38,"column":28},"generated":{"line":1,"column":1279}},{"source":"../routes/login.js","name":"console","original":{"line":38,"column":28},"generated":{"line":1,"column":1286}},{"source":"../routes/login.js","name":"log","original":{"line":38,"column":36},"generated":{"line":1,"column":1294}},{"source":"../routes/login.js","name":"err","original":{"line":38,"column":40},"generated":{"line":1,"column":1298}},{"source":"../routes/login.js","name":"message","original":{"line":38,"column":44},"generated":{"line":1,"column":1300}},{"source":"../routes/login.js","name":"catch","original":{"line":40,"column":11},"generated":{"line":1,"column":1313}},{"source":"../routes/login.js","original":{"line":40,"column":17},"generated":{"line":1,"column":1319}},{"source":"../routes/login.js","name":"err","original":{"line":40,"column":17},"generated":{"line":1,"column":1328}},{"source":"../routes/login.js","name":"console","original":{"line":40,"column":24},"generated":{"line":1,"column":1331}},{"source":"../routes/login.js","name":"console","original":{"line":40,"column":24},"generated":{"line":1,"column":1338}},{"source":"../routes/login.js","name":"log","original":{"line":40,"column":32},"generated":{"line":1,"column":1346}},{"source":"../routes/login.js","name":"err","original":{"line":40,"column":36},"generated":{"line":1,"column":1350}},{"source":"../routes/login.js","name":"message","original":{"line":40,"column":40},"generated":{"line":1,"column":1352}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":1363}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":1368}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":1370}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":1374}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":1380}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":1387}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":1389}},{"source":"../routes/login.js","original":{"line":5,"column":17},"generated":{"line":1,"column":1398}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1404}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1411}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1420}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1422}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1424}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1427}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1434}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1436}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1442}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1447}},{"source":"../routes/login.js","original":{"line":5,"column":0},"generated":{"line":1,"column":1459}}],"sources":{"../routes/login.js":"const MidoDb = require(\"./../lib/MidoDb\");\r\nconst Crypto = require(\"./../lib/Crypto\");\r\nconst Utils = require(\"./../lib/Utils\");\r\n\r\nmodule.exports = async (req, res, next, baseTable = \"users\") => {\r\n    /* get the params */\r\n    const data = req.query;\r\n    if (!data || !data.user || !data.password)\r\n        return res.send(Utils.buildResponse(false, \"invalid params\"));\r\n\r\n    let session = req.session;\r\n\r\n    const password = Crypto.md5(data.password);\r\n    const user = data.user;\r\n\r\n    MidoDb.init(\"mongodb\")\r\n        .then(db => {\r\n            const query = {user: user, password: password};\r\n            //const query={};\r\n            MidoDb.selectRecord(baseTable, query).then(record => {\r\n                if (!record.length || record.length === 0) {\r\n                    const msg = \"Invalid login details\";\r\n                    return res.send(Utils.buildResponse(false, msg));\r\n                }\r\n                // check if this is an active user\r\n                const user = record[0];\r\n                if (user.status !== 1) {\r\n                    const msg = `Account has been deactivated ${user.user}. Please contact admin`;\r\n                    return res.send(Utils.buildResponse(false, msg));\r\n                }\r\n                // say user is login\r\n                const msg = `Welcome ${user.user}`;\r\n                session.user=user.user;\r\n                session.user_email=user.email;\r\n                session.user_id=user._id;\r\n                return res.send(Utils.buildResponse(true, msg, user.user, user.email));\r\n\r\n            }).catch(err => console.log(err.message));\r\n\r\n        }).catch(err => console.log(err.message));\r\n}"},"lineCount":null}},"error":null,"hash":"91992a308fa6c0db418e75f57a18b0dd","cacheData":{"env":{}}}